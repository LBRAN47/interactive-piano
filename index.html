<!DOCTYPE html>
<html lang='en'>
<head>
    <link rel='stylesheet' href='styles.css'>
    <meta charset='UTF-8'>
    <meta name='viewport' content='width=device-width, initial-scale=1.0'>
    <title>Virtual Piano</title>
</head>
<body>
    <h1>
        <p>Virtual Piano</p>
    </h1>
    <div class='white_keys'>
        <div class='img_container'><img id='A1' class='white_key' src='Images/piano_cf.PNG'></div>
        <div class='img_container'><img id='B1'class='white_key' src='Images/piano_eb.PNG'></div>
        <div class='img_container'><img id='C2'class='white_key' src='Images/piano_cf.PNG'></div>
        <div class='img_container'><img id='D2'class='white_key' src='Images/piano_gad.PNG'></div>
        <div class='img_container'><img id='E2'class='white_key' src='Images/piano_eb.PNG'></div>
        <div class='img_container'><img id='F2'class='white_key' src='Images/piano_cf.PNG'></div>
        <div class='img_container'><img id='G2'class='white_key' src='Images/piano_gad.PNG'></div>
        <div class='img_container'><img id='A2'class='white_key' src='Images/piano_gad.PNG'></div>
        <div class='img_container'><img id='B2'class='white_key' src='Images/piano_eb.PNG'></div>
        <div class='img_container'><img id='C3'class='white_key' src='Images/piano_cf.PNG'></div>
        <div class='img_container'><img id='D3'class='white_key' src='Images/piano_gad.PNG'></div>
        <div class='img_container'><img id='E3'class='white_key' src='Images/piano_eb.PNG'></div>
        <div class='img_container'><img id='F3'class='white_key' src='Images/piano_cf.PNG'></div>
        <div class='img_container'><img id='G3'class='white_key' src='Images/piano_gad.PNG'></div>
        <div class='img_container'><img id='A3'class='white_key' src='Images/piano_gad.PNG'></div>
        <div class='img_container'><img id='B3'class='white_key' src='Images/piano_eb.PNG'></div>
        <div class='img_container'><img id='C4'class='white_key' src='Images/piano_cf.PNG'></div>
        <div class='img_container'><img id='D4'class='white_key' src='Images/piano_gad.PNG'></div>
        <div class='img_container'><img id='E4'class='white_key' src='Images/piano_eb.PNG'></div>
        <div class='img_container'><img id='F4'class='white_key' src='Images/piano_cf.PNG'></div>
        <div class='img_container'><img id='G4'class='white_key' src='Images/piano_gad.PNG'></div>
        <div class='img_container'><img id='A4'class='white_key' src='Images/piano_gad.PNG'></div>
        <div class='img_container'><img id='B4'class='white_key' src='Images/piano_eb.PNG'></div>
        <div class='img_container'><img id='C5'class='white_key' src='Images/piano_cf.PNG'></div>
        <div class='img_container'><img id='D5'class='white_key' src='Images/piano_gad.PNG'></div>
        <div class='img_container'><img id='E5'class='white_key' src='Images/piano_eb.PNG'></div>
        <div class='img_container'><img id='F5'class='white_key' src='Images/piano_cf.PNG'></div>
        <div class='img_container'><img id='G5'class='white_key' src='Images/piano_gad.PNG'></div>
        <div class='img_container'><img id='A5'class='white_key' src='Images/piano_gad.PNG'></div>
        <div class='img_container'><img id='B5'class='white_key' src='Images/piano_eb.PNG'></div>
        <div class='img_container'><img id='C6'class='white_key' src='Images/piano_topc.PNG'></div>
    </div>
    <div class='black_keys'>
        <div class='img_container'><img id='Bb1' class='black_key' src='Images/piano_black.PNG'></div>
        <div class='img_container'><img id='Db2' class='black_key' src='Images/piano_black.PNG'></div>
        <div class='img_container'><img id='Eb2' class='black_key' src='Images/piano_black.PNG'></div>
        <div class='img_container'><img id='Gb2' class='black_key' src='Images/piano_black.PNG'></div>
        <div class='img_container'><img id='Ab2' class='black_key' src='Images/piano_black.PNG'></div>
        <div class='img_container'><img id='Bb2' class='black_key' src='Images/piano_black.PNG'></div>
        <div class='img_container'><img id='Db3' class='black_key' src='Images/piano_black.PNG'></div>
        <div class='img_container'><img id='Eb3' class='black_key' src='Images/piano_black.PNG'></div>
        <div class='img_container'><img id='Gb3' class='black_key' src='Images/piano_black.PNG'></div>
        <div class='img_container'><img id='Ab3' class='black_key' src='Images/piano_black.PNG'></div>
        <div class='img_container'><img id='Bb3' class='black_key' src='Images/piano_black.PNG'></div>
        <div class='img_container'><img id='Db4' class='black_key' src='Images/piano_black.PNG'></div>
        <div class='img_container'><img id='Eb4' class='black_key' src='Images/piano_black.PNG'></div>
        <div class='img_container'><img id='Gb4' class='black_key' src='Images/piano_black.PNG'></div>
        <div class='img_container'><img id='Ab4' class='black_key' src='Images/piano_black.PNG'></div>
        <div class='img_container'><img id='Bb4' class='black_key' src='Images/piano_black.PNG'></div>
        <div class='img_container'><img id='Db5' class='black_key' src='Images/piano_black.PNG'></div>
        <div class='img_container'><img id='Eb5' class='black_key' src='Images/piano_black.PNG'></div>
        <div class='img_container'><img id='Gb5' class='black_key' src='Images/piano_black.PNG'></div>
        <div class='img_container'><img id='Ab5' class='black_key' src='Images/piano_black.PNG'></div>
        <div class='img_container'><img id='Bb5' class='black_key' src='Images/piano_black.PNG'></div>
    </div>
    <script>
        let keys_selected = []
        let mousedown = false
        let keydown = false
        const key_binds = {'1': 'Gb2', 'q' : 'G2', '2': 'Ab2', 'w' : 'A2', '3': 'Bb2', 'e': 'B2', 'r' : 'C3', '5': 'Db3', 't': 'D3', '6': 'Eb3', 'y': 'E3', 'u': 'F3', '8': 'Gb3', 'i': 'G3', '9': 'Ab3', 'o': 'A3', 'p': 'B3', '0': 'Bb3', '[': 'C4', '=': 'Db4', 'z': 'D4', 's': 'Eb4', 'x': 'E4', 'c': 'F4', 'f': 'Gb4', 'v': 'G4', 'g': 'Ab4', 'b': 'A4', 'h': 'Bb4', 'n': 'B4', 'm': 'C5', 'k': 'Db5', ',': 'D5', 'l': 'Eb5', '.': 'E5', '/': 'F5', '\'': 'Gb5'}
        pad_black_keys()

        window.addEventListener('mouseup', (event) => {
                keys_selected.forEach((key_selected) => {
                    key_selected.parentElement.classList.remove('selected_key');
                })
                keys_selected = [] //empty it out
                mousedown = false;
            })
        window.addEventListener('keydown', keydown_listener);
        window.addEventListener('keyup', keyup_listener)
            
        const keys = document.querySelectorAll('.black_key, .white_key')
        keys.forEach(function(key) {
            key.addEventListener('mousedown', (event) => {
                press_key(key);
                mousedown = true
            })
            key.addEventListener('mouseenter', (event) => {
                if (mousedown) {
                    press_key(key);
                }
            })
        })
        function keydown_listener(event) {
            if (event.key in key_binds) {
                key = document.getElementById(key_binds[event.key]);
                if (keys_selected.includes(key)) {
                    return;
                }
                press_key(key);
            }
        }
        function keyup_listener(event) {
            if (event.key in key_binds)  {
                key = document.getElementById(key_binds[event.key]);
                key.parentElement.classList.remove('selected_key');
                keys_selected.splice(keys_selected.indexOf(key), 1); //remove key from array
            }
        }
        
        function press_key(key) {
            key.parentElement.classList.add('selected_key');
            keys_selected.push(key);
            const audio = new Audio('Sounds/' + key.id + '.mp3');
            audio.play()

        }
        function pad_black_keys() {
            const black_keys = document.querySelectorAll('.black_key');
            let count = -1
            black_keys.forEach(function(black_key) {
                if (count == -1) {
                    black_key.style.paddingLeft = '1.65vw';
                    black_key.style.paddingRight = '1.55vw';
                    count++;
                    return;
                }
                if (count % 5 === 0 || count % 5 === 2) {
                    black_key.style.paddingLeft = '1.55vw';
                } else {
                    black_key.style.paddingLeft = '0.35vw';
                }if (count % 5 === 1 || count % 5 === 4) {
                    black_key.style.paddingRight = '1.55vw';
                } else {
                    black_key.style.paddingRight = '0.35vw';
                }
                count++;
            })
        }
        

    </script>
    
</body>
</html>